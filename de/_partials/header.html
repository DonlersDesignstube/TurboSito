<header id="site-header" class="sticky top-0 z-50 bg-[#0b0f1a]/85 backdrop-blur border-b border-white/10">
  <div class="container">
    <div class="flex items-center justify-between p-4">
      <a href="/TurboSito/de/" class="text-xl font-semibold focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 rounded">TurboSito</a>
      <div class="flex items-center gap-4">
        <nav class="lang-switch" aria-label="Sprachumschalter">
          <a href="/TurboSito/de/" data-lang="de" hreflang="de">DE</a>
          <a href="/TurboSito/en/" data-lang="en" hreflang="en">EN</a>
          <a href="/TurboSito/it/" data-lang="it" hreflang="it">IT</a>
        </nav>
        <button id="theme-toggle" class="btn btn-outline" aria-pressed="false" type="button">Theme</button>
        <button id="menu-btn" class="md:hidden p-2 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500" aria-expanded="false" aria-controls="main-nav" aria-label="Menü">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 6h16M4 12h16M4 18h16" /></svg>
        </button>
      </div>
    </div>
    <nav id="main-nav" class="site-nav hidden absolute top-full left-0 w-full bg-white shadow-md md:block md:static md:shadow-none" aria-label="Hauptnavigation">
      <ul class="flex flex-col max-w-6xl mx-auto p-4 gap-2 md:flex-row md:gap-6 md:p-0">
        <li><a href="/TurboSito/de/" data-page="home" class="block text-[var(--fg)] px-2 py-1 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500">Start</a></li>
        <li><a href="/TurboSito/de/ueber-mich.html" data-page="about" class="block text-[var(--fg)] px-2 py-1 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500">Über mich</a></li>
        <li><a href="/TurboSito/de/leistungen.html" data-page="services" class="block text-[var(--fg)] px-2 py-1 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500">Leistungen</a></li>
        <li><a href="/TurboSito/de/portfolio.html" data-page="portfolio" class="block text-[var(--fg)] px-2 py-1 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500">Portfolio</a></li>
        <li><a href="/TurboSito/de/kontakt.html" data-page="contact" class="block text-[var(--fg)] px-2 py-1 rounded focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500">Kontakt</a></li>
      </ul>
    </nav>
  </div>
  <script>
    const btn = document.getElementById('menu-btn')
    const nav = document.getElementById('main-nav')
    btn.addEventListener('click', () => {
      const open = btn.getAttribute('aria-expanded') === 'true'
      btn.setAttribute('aria-expanded', String(!open))
      nav.classList.toggle('hidden')
    })
    const pages = {
      home: {de: '/TurboSito/de/', en: '/TurboSito/en/', it: '/TurboSito/it/'},
      about: {de: '/TurboSito/de/ueber-mich.html', en: '/TurboSito/en/about.html', it: '/TurboSito/it/chi-sono.html'},
      services: {de: '/TurboSito/de/leistungen.html', en: '/TurboSito/en/services.html', it: '/TurboSito/it/servizi.html'},
      portfolio: {de: '/TurboSito/de/portfolio.html', en: '/TurboSito/en/portfolio.html', it: '/TurboSito/it/portfolio.html'},
      contact: {de: '/TurboSito/de/kontakt.html', en: '/TurboSito/en/contact.html', it: '/TurboSito/it/contatti.html'},
      imprint: {de: '/TurboSito/de/impressum.html', en: '/TurboSito/en/legal.html', it: '/TurboSito/it/note-legali.html'},
      privacy: {de: '/TurboSito/de/datenschutz.html', en: '/TurboSito/en/legal.html', it: '/TurboSito/it/privacy.html'}
    }
    const path = window.location.pathname.replace(/index\.html$/, '')
    let key = 'home'
    for (const [k, v] of Object.entries(pages)) {
      if (Object.values(v).includes(path)) { key = k; break }
    }
    const lang = document.documentElement.lang
    const current = pages[key]
    document.querySelector('nav.lang-switch a[data-lang="de"]').href = current.de
    document.querySelector('nav.lang-switch a[data-lang="en"]').href = current.en
    document.querySelector('nav.lang-switch a[data-lang="it"]').href = current.it
    document.querySelector('nav.lang-switch a[data-lang="' + lang + '"]')
      .classList.add('font-semibold', 'text-indigo-600')
    document.querySelectorAll('#main-nav a[data-page]').forEach(a => {
      if (a.dataset.page === key) {
        a.setAttribute('aria-current', 'page')
        a.classList.add('text-indigo-600', 'font-semibold')
      }
    })
  </script>
</header>
